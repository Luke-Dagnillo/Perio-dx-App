
<CreateAccountWindow>:
    id: create_account 
    name: "create account"

    canvas.before:
        Color:
            rgba: 252/255, 238/255, 227/255, 1 # A cream color for the background
        Rectangle:
            size: self.size
            pos: self.pos

    FloatLayout:
        MDLabel:
            id: create_account_title   
            text: "Create An Account"
            font_size: 40
            halign: "center"
            size_hint_y: 0.08
            pos_hint: {'center_x': 0.5, 'y': .85}
            size_hint: (.8,.1)
            height: self.texture_size[1]
            
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            spacing: dp(20)

            # Container for first name field
            FloatLayout:
                size_hint_x: .8
                size_hint_y: None
                height: dp(48)

                MDTextField:
                    id: first_name
                    hint_text: "First Name"
                    icon_right: "account"
                    size_hint: .9, None
                    height: dp(48)
                    multiline: False
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}

            # Container for last name field
            FloatLayout:
                size_hint_x: .8
                size_hint_y: None
                height: dp(48)

                MDTextField:
                    id: last_name
                    hint_text: "Last Name"
                    icon_right: "account"
                    size_hint: .9, None
                    height: dp(48)
                    multiline: False
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}

            # Container for email field
            FloatLayout:
                size_hint_x: .8
                size_hint_y: None
                height: dp(48)

                MDTextField:
                    id: email
                    hint_text: "Email"
                    icon_right: "email"
                    size_hint: .9, None
                    height: dp(48)
                    multiline: False
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}

            # Container for password field
            FloatLayout:
                size_hint_x: .8
                size_hint_y: None
                height: dp(48)

                MDTextField:
                    id: password
                    hint_text: "Password"
                    password: True
                    size_hint: .9, None
                    height: dp(48)
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}

                MDIconButton:
                    icon: "eye-off"
                    size_hint: None, None
                    size: dp(48), dp(48)
                    pos_hint: {'x': 0.9, 'center_y': 0.5}
                    on_release: app.toggle_password_visibility(password, self)

            # Container for password verification field
            FloatLayout:
                size_hint_x: .8
                size_hint_y: None
                height: dp(48)

                MDTextField:
                    id: password_verification
                    hint_text: "Verify Password"
                    password: True
                    size_hint: .9, None
                    height: dp(48)
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}

                MDIconButton:
                    icon: "eye-off"
                    size_hint: None, None
                    size: dp(48), dp(48)
                    pos_hint: {'x': 0.9, 'center_y': 0.5}
                    on_release: app.toggle_password_visibility(password_verification, self)


        MDLabel:
            id: create_account_label 
            text:""
            font_size: 30
            color: (1, 0, 0, 1)
            halign: "center"
            size_hint_y: 0.08
            pos_hint: {'center_x': .5, 'y': .25}
            size_hint: (.6,.1)
            height: self.texture_size[1]

        MDFillRoundFlatButton:
            text: "Create Account"
            font_size: sp(20)
            md_bg_color: 130/255, 209/255, 217/255, 1  # Teal Button
            text_color: 0, 0, 0, 1  # Black Text
            pos_hint: {'center_x': 0.5, 'y': 0.165}
            size_hint: (.6,.1)
            on_release: 
                app.create_account()

        MDFillRoundFlatButton:
            text: "Back"
            font_size: sp(20)
            md_bg_color: 104/255, 104/255, 174/255, 1 # Purple button
            text_color: 0, 0, 0, 1  # Black Text
            pos_hint: {'center_x': 0.5, 'y': 0.05}
            size_hint: (.6,.1)
            on_release: 
                app.change_screen("login_screen")
                root.manager.transition.direction = "right"
